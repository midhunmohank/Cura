{"ast":null,"code":"import _regeneratorRuntime from\"E:/developer/xampp/htdocs/shivali/hyre/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/developer/xampp/htdocs/shivali/hyre/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/developer/xampp/htdocs/shivali/hyre/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// import '../../css/admin.css';\n// import e from \"cors\";\nimport React,{useState}from\"react\";// import { useHistory } from \"react-router-dom\";\nimport ApiFunctions from\"../../ApiFunctions\";import{Helmet}from\"react-helmet\";import{useHistory}from\"react-router-dom\";import useToken from\"./useToken\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var setToken=_ref.setToken;var history=useHistory();var token=useToken();if(token.token){if(token.token.data.user_role==='user'){history.push('/');}if(token.token.data.user_role==='org'){history.push('/job-list');}if(token.token.data.user_role==='admin'){history.push('/organizations');}}// localStorage.setItem('currentUser', '');\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var loginUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();data=new FormData();data.append('email',email);data.append('password',password);ApiFunctions.login(data,{headers:{'Content-Type':'application/form-data'}}).then(function(response){localStorage.setItem('currentUser',JSON.stringify(response.data));setToken(response.data);if(response.data.data.user_role==='user'){history.push('/');}else if(response.data.data.user_role==='org'){history.push('/job-list');}else if(response.data.data.user_role==='admin'){history.push('/organizations');}}).catch(function(e){console.log(e);});case 5:case\"end\":return _context.stop();}}},_callee);}));return function loginUser(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"link\",{rel:\"stylesheet\",href:require('../../css/login.css').default}),/*#__PURE__*/_jsx(\"link\",{rel:\"stylesheet\",href:require('../vendor/fontawesome-free/css/all.min.css').default})]}),/*#__PURE__*/_jsx(\"div\",{id:\"login-block\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"\",method:\"post\",className:\"login-block\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Sign In\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},placeholder:\"Email\",className:\"form-control\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},placeholder:\"Password\",className:\"form-control\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:loginUser,className:\"btn btn-primary\",children:\"Sign In\"})})]})})]});};export default Login;","map":{"version":3,"sources":["E:/developer/xampp/htdocs/shivali/hyre/src/components/admin/login.js"],"names":["React","useState","ApiFunctions","Helmet","useHistory","useToken","Login","setToken","history","token","data","user_role","push","email","setEmail","password","setPassword","loginUser","e","preventDefault","FormData","append","login","headers","then","response","localStorage","setItem","JSON","stringify","catch","console","log","require","default","target","value"],"mappings":"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","sourcesContent":["\r\n// import '../../css/admin.css';\r\n// import e from \"cors\";\r\nimport React, { useState } from \"react\";\r\n// import { useHistory } from \"react-router-dom\";\r\nimport ApiFunctions from \"../../ApiFunctions\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport useToken from \"./useToken\";\r\n\r\nconst Login = ({ setToken }) => {\r\n\r\n\tconst history = useHistory();\r\n\tconst token = useToken();\r\n\tif (token.token) {\r\n\r\n\t\tif (token.token.data.user_role === 'user') {\r\n\t\t\thistory.push('/');\r\n\t\t}\r\n\t\tif (token.token.data.user_role === 'org') {\r\n\t\t\thistory.push('/job-list');\r\n\t\t}\r\n\t\tif (token.token.data.user_role === 'admin') {\r\n\t\t\thistory.push('/organizations');\r\n\t\t}\r\n\t}\r\n\r\n\t// localStorage.setItem('currentUser', '');\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst loginUser = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tvar data = new FormData();\r\n\t\tdata.append('email', email);\r\n\t\tdata.append('password', password);\r\n\r\n\t\tApiFunctions.login(data, {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/form-data'\r\n\t\t\t}\r\n\t\t}).then(response => {\r\n\t\t\tlocalStorage.setItem('currentUser', JSON.stringify(response.data));\r\n\t\t\tsetToken(response.data);\r\n\t\t\tif (response.data.data.user_role === 'user') {\r\n\t\t\t\thistory.push('/');\r\n\t\t\t}\r\n\t\t\telse if (response.data.data.user_role === 'org') {\r\n\t\t\t\thistory.push('/job-list');\r\n\t\t\t}\r\n\r\n\t\t\telse if (response.data.data.user_role === 'admin') {\r\n\t\t\t\thistory.push('/organizations');\r\n\t\t\t}\r\n\r\n\t\t}).catch(e => {\r\n\t\t\tconsole.log(e);\r\n\t\t})\r\n\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"App\">\r\n\t\t\t<Helmet>\r\n\t\t\t\t<link rel=\"stylesheet\" href={require('../../css/login.css').default} />\r\n\t\t\t\t<link rel=\"stylesheet\" href={require('../vendor/fontawesome-free/css/all.min.css').default} />\r\n\t\t\t</Helmet>\r\n\r\n\r\n\r\n\t\t\t<div id=\"login-block\">\r\n\t\t\t\t<form action=\"\" method=\"post\" className=\"login-block\">\r\n\t\t\t\t\t<h3>Sign In</h3>\r\n\t\t\t\t\t<div className=\"input-group\">\r\n\t\t\t\t\t\t<input type=\"text\" name=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} placeholder=\"Email\" className=\"form-control\" required />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"input-group\">\r\n\t\t\t\t\t\t<input type=\"password\" name=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} placeholder=\"Password\" className=\"form-control\" required />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"input-group\">\r\n\t\t\t\t\t\t<button type=\"submit\" onClick={loginUser} className=\"btn btn-primary\">Sign In</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\r\n\r\n\t\t\t{/* \r\n\t\t\t<div id=\"login-block\">\r\n\t\t\t\t<form action=\"\" method=\"post\" className=\"login-block\">\r\n\t\t\t\t\t<h3>Sign In </h3>\r\n\t\t\t\t\t<div className=\"input-group\">\r\n\t\t\t\t\t\t<input type=\"text\" name=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} placeholder=\"Email\" className=\"form-control\" required />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"input-group\">\r\n\t\t\t\t\t\t<input type=\"password\" name=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} placeholder=\"Password\" className=\"form-control\" required />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"input-group\">\r\n\t\t\t\t\t\t<button type=\"submit\" value=\"Log in\" onClick={loginUser} className=\"btn btn-primary\">Sign In</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div> */}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}