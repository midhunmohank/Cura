{"ast":null,"code":"import _regeneratorRuntime from\"E:/developer/xampp/htdocs/shivali/hyre/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"E:/developer/xampp/htdocs/shivali/hyre/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"E:/developer/xampp/htdocs/shivali/hyre/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";// import '../../css/admin.css';\n// import e from \"cors\";\nimport React,{useState}from\"react\";// import { useHistory } from \"react-router-dom\";\nimport ApiFunctions from\"../../ApiFunctions\";import{Helmet}from\"react-helmet\";import{useHistory}from\"react-router-dom\";import useToken from\"./useToken\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var setToken=_ref.setToken;var history=useHistory();var token=useToken();if(token.token){if(token.token.data.user_role==='user'){history.push('/');}if(token.token.data.user_role==='org'){history.push('/job-list');}}// localStorage.setItem('currentUser', '');\nvar _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var loginUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();data=new FormData();data.append('email',email);data.append('password',password);ApiFunctions.login(data,{headers:{'Content-Type':'application/form-data'}}).then(function(response){localStorage.setItem('currentUser',JSON.stringify(response.data));setToken(response.data);if(response.data.data.user_role==='user'){history.push('/');}else if(response.data.data.user_role==='org'){history.push('/job-list');}}).catch(function(e){console.log(e);});case 5:case\"end\":return _context.stop();}}},_callee);}));return function loginUser(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"link\",{rel:\"stylesheet\",href:require('../../css/admin.css').default})}),/*#__PURE__*/_jsx(\"div\",{id:\"login-block\",children:/*#__PURE__*/_jsxs(\"form\",{action:\"\",method:\"post\",className:\"login-block\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Login to New Company\"}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},placeholder:\"Email\",className:\"form-control\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},placeholder:\"Password\",className:\"form-control\",required:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",value:\"Log in\",onClick:loginUser,className:\"btn btn-primary\",children:\"Login\"})})]})})]});};export default Login;","map":{"version":3,"sources":["E:/developer/xampp/htdocs/shivali/hyre/src/components/admin/login.js"],"names":["React","useState","ApiFunctions","Helmet","useHistory","useToken","Login","setToken","history","token","data","user_role","push","email","setEmail","password","setPassword","loginUser","e","preventDefault","FormData","append","login","headers","then","response","localStorage","setItem","JSON","stringify","catch","console","log","require","default","target","value"],"mappings":"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","sourcesContent":["\r\n// import '../../css/admin.css';\r\n// import e from \"cors\";\r\nimport React, {useState} from \"react\";\r\n// import { useHistory } from \"react-router-dom\";\r\nimport ApiFunctions from \"../../ApiFunctions\";\r\nimport { Helmet } from \"react-helmet\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport useToken from \"./useToken\";\r\n\r\nconst Login = ({setToken}) =>{\r\n\r\n\tconst history = useHistory();\r\n\t\tconst token = useToken();\r\n\t\tif(token.token){\r\n\t\t\r\n\t\tif(token.token.data.user_role === 'user'){\r\n\t\t\thistory.push('/');\r\n\t\t}\r\n\t\tif(token.token.data.user_role === 'org'){\r\n\t\t\thistory.push('/job-list');\r\n\t\t}\r\n\t\t}\r\n\r\n\t// localStorage.setItem('currentUser', '');\r\nconst [email, setEmail] = useState('');\r\nconst [password,setPassword]  = useState('');\r\nconst loginUser  = async(e) => {\r\n\te.preventDefault();\r\n\tvar data = new FormData();\r\n\tdata.append('email', email);\r\n\tdata.append('password', password);\r\n\r\n\tApiFunctions.login(data,{\r\n\t\theaders:{\r\n\t\t\t'Content-Type': 'application/form-data'\r\n\t\t}\r\n\t}).then(response => {\r\n\t\tlocalStorage.setItem('currentUser', JSON.stringify(response.data));\r\n\t\tsetToken(response.data);\r\n\t\tif(response.data.data.user_role === 'user'){\r\n\t\t\thistory.push('/');\r\n\t\t}\r\n\t\telse if(response.data.data.user_role === 'org'){\r\n\t\t\thistory.push('/job-list');\r\n\t\t}\r\n\r\n\t}).catch(e => {\r\n\t\tconsole.log(e);\r\n\t})\r\n\r\n}   \r\n\r\n    return (\r\n        <div className=\"App\">\r\n\t\t\t<Helmet>\r\n<link rel=\"stylesheet\"  href={require('../../css/admin.css').default} />\r\n</Helmet>\r\n<div id=\"login-block\">\r\n\t<form action=\"\" method=\"post\" className=\"login-block\">\r\n\t\t<h3>Login to New Company</h3>\r\n\t\t<div className=\"input-group\">\r\n\t\t\t<input type=\"text\" name=\"email\" value={email} onChange={(e) => setEmail(e.target.value)} placeholder=\"Email\" className=\"form-control\" required />\r\n\t\t</div>\r\n\t\t<div className=\"input-group\">\r\n\t\t\t<input type=\"password\" name=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} placeholder=\"Password\" className=\"form-control\" required />\r\n\t\t</div>\r\n\t\t<div className=\"input-group\">\r\n\t\t\t<button type=\"submit\" value=\"Log in\" onClick={loginUser} className=\"btn btn-primary\">Login</button>\r\n\t\t</div>\r\n\t</form>\r\n</div>\t\r\n</div>\t\r\n    );\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}